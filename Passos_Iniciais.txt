// => npm init -y => Para criar o package.json
// => Criar uma pasta 'src'.
// => Dentro da pasta 'src' criar o 'server.ts' onde vai ser o servidor http.
// => npm i typescript @types/node tsx tsup -D.
        -> typescript @types/node =>sendo o proprio typescript.
        -> tsx => Biblioteca usada para converter e executar o codigo typescript pois o node não entende por padrão.
        -> tsup => Biblioteca usada para criar a versão de buld da aplicação.
// => npx tsc --init => Cria o arquivo tsconfig.json.
        -> Dentro do arquivo trocamos o target para 'es2020'.
// => npm i fastify => Instancia do servidor.
// => Criar o app.ts para criar a nossa aplicação.
// => criar o .gitignore
// => criar no package.json o script 'dev':'tsx watch src/server.ts'
// => Criar no package.json o script 'build':'tsup src --out-dir build'
// => Criar o script 'start':'node build/server.js' para executar nosso codigo em prod. 
// => Criar o arquivo '.npmrc' para configurar o npm com 'save_exact=true'
// => rodar novamente o npm i typescript @types/node tsx tsup -D e o npm i fastify
// => configurar '.env'
// => intalar biblioteca 'npm i dotenv'
// => Criar pasta 'env' dentro de 'src' e dentro criar 'index.ts', utilzado para validar as variaveis de ambiente, e tem toda uma configuracao dentro desse arquivo.
// => npm i zod, utilizado para fazer a validação das variaveis do projeto inteiro (controllers, env/index).
// => npm i prisma -D (Na intalacao do prisma e bom ficar de olho que apartir da versao 7 ele muda muitas configuracoes)
// => npx prisma init
// => npx prisma generate, somente depois que criar a model/table para ele criar a tipagem
// => npm i @prisma/client
// =>  docker run --name api-solid-pg -e POSTGRESQL_USERNAME=docker -e POSTGRESQL_PASSWORD=docker -e POSTGRESQL_DATABASE=apisolid -p 5432:5432 bitnami/postgresql
        -> Acima era para criar um container do bitnami/postgresql, mas tabem da para fazer isso no app desktop, assim como start e stop o container.
// => Agora tem que ajeitar o .env com o DATABASE_URL
// => npx prisma migrate dev, serve para rodar as migrations do banco de dados
// => npx prisma studio
// => docker compose up -d , aqui configuramos o docker compose criando um arquivo chamado docker-compose.yml


//=> Linha de criação inicial <=//
//=> OBS: Após termos os repositorios criados essa linha muda um pouco, pois basicamente temos 1 repositorio para cada tabela da model, ou seja, talvez vamos fazer inclusoes e alteraçoes neles ao inves de criar um novo sempre, sendo assim pode ser mais util seguir o passo a passo de 'Criando uma funcionalidade' <=//

// => Criamos o arquivo server.ts na raiz do projeto e o configuramos com as infos do server
// => Criamos o arquivo app.ts na raiz do projeto e nele instanciamos o fastify e registramos os aquivos de route.ts (para isso vamos precisar criar os arquivos de route.ts)
// => Nos controllers criamos os arquivos de routes.ts e nele configuramos o endpoint a ser chamado no insominia apontando para qual funcionalidade esse endpoint vai realizar (para isso vamos precisar criar o arquivo da funcionalidade)
// => Ainda nos controllers criamos o arquivo da funcionalidade ex: register-organizations.ts, nele definimos o body a ser necessario na chamada do endpoint e vamos passar a ação para o repositorio necessario (para isso vamos precisar criar o repositorio da funcionalidade 'organizations-repository.ts' e tambem o do prisma 'prisma-organizations-repository.ts' )
// => Configuramos o repositorio da funcionalidade meio que setando quais ações o prisma poderá criar 
// => Configuramos o repositorio do prisma implementando o repositorio da funcionalidade, e agora realmente criando as ações que poderao ser chamadas 
// => Com isso feito, agora criamos nosso arquivo de use-case da funcionalidade, pois vamos chama-lo no controler
// => No use-case temos o metodo 'execute' que executa o caso de uso, e dentro dele temos as validações para o endpoint chamado no insomia e a chamada do repositorio fazendo a ação solicitada no repositorio, por exemplo, pedindo a criacao de uma organization.
// => após isso no nosso controller chamamos o metodo execute do caso de uso e passamos os campos que recebemos na requisição para que ele execute a ação que queremos
// => por ultimo e explicado mais a baixo, incluimos os testes unitarios para a funcionalidade


//=> ENCRIPTAMENTO DE SENHA <=//
// => npm i bcryptjs
// => npm i -D @types/bcryptjs


//==> VITEST <==//
// => npm i vitest vite-tsconfig-paths -D
// => criar o arquivo vite.config.mts
// => no package.json criar os scripts -> "test": "vitest run", "test:watch": "vitest", "test:coverage": "vitest run --coverage"
// => aqui o teste ja pode ser criado
// => usando o coverage ele da erro e precisa adicionar isso ao vite.config.ts test: { coverage: { exclude: ['generated/**', 'node_modules/**', ],},},
// => npm i -D @vitest/ui -> deprecated

//==> Criando uma funcionalidade <==//
// => primeiro faz o use-case (repository, prisma repository, imMemory repository)
// => segundo pode fazer os testes unitarios
// => terceiro faz o controller
// => quarto inclui no route.ts especifico do controller onde vc fez a funcionalidade

//==> Criando um teste<==//
// => O teste é criando para cada controller, use-case e talvez para outras funcionalidades que vc queira 
// => Criamos o arquivo de teste ".spec.ts", nele iremos escrever os testes e vamos precisar associar, apenas no arquivo de testes, o nosso repository da funcionalidade "RegisterOrganizationsUseCase" ao "InMemoryOrganizationsRepository", então devemos crialo antes.
// => o InMemoryOrganizationsRepository é desvinculado do prisma, pois o objetivo é sempre ter um "Banco de dados" limpo para executar cada teste unitario.
// => no beforeEach configuramos o repositorio 
// => E por fim criamos os testes
// => Alguns precisaram do retorno da API, então devemos no arquivo original que estamos criando o teste, configurar a Response colocando a Promise no execute e retornando o que foi criado. 

// => npm i dayjs -> usando ele conseguimos definir o start e end do dia, usado para validar a data do checkin

//==> Autenticaçao <==//
// => JWT - Jason Web Token
// => npm i fastify/jwt
// => npm i @vitest/ui@latest -D 
// => npm i vite -D 

//==> Enviroment Test <==//
// => Dentro da pasta Prisma cria uma pasta para os enviroments e dentro dela cria um arquivo .ts onde sera feito o teste.
// => No vite.config.mts é importante atualizar as configurações de projects de teste
// => npm i supertest -D -> serve para fazer testes usando requisições http ser precisar botar a aplicação no ar
// => npm i @types/supertest -D

//==> RBAC <==//
// => npm i @fastify/cookie